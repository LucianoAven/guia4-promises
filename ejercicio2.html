<!doctype html>
<html lang="en">

<body>

    <ul>

        <!-- Genera un botón "Comprar" para cada producto -->

        <li>
            <!-- Texto para especificar el producto que compra cada botón. -->
            <span>Laptop: $1200</span>
            <button onclick="procesoDeCompra(productos[0])">Comprar</button>
        </li>
        <br>
        <li>
            <span>Teléfono móvil: $800</span>
            <button onclick="procesoDeCompra(productos[1])">Comprar</button>
        </li>
        <br>
        <li>
            <span>Tablet: $500</span>
            <button onclick="procesoDeCompra(productos[2])">Comprar</button>
        </li>
        <br>
        <li>
            <span>Smartwatch: $300</span>
            <button onclick="procesoDeCompra(productos[3])">Comprar</button>
        </li>
        <br>
        <li>
            <span>Auriculares Inalámbricos: $150</span>
            <button onclick="procesoDeCompra(productos[4])">Comprar</button>
        </li>

    </ul>

    <script>

        // Simulación de proceso de compra:
        // Escribe un programa donde el usuario tenga una lista de productos, 
        // cada uno con un botón que diga “Comprar” que al presionarlo dispare 
        // una función llamada procesoDeCompra que tome el producto seleccionado 
        // como argumento y devuelva una promesa. Esta promesa debe simular un proceso 
        // de compra, que incluya verificar la disponibilidad del producto, 
        // calcular el precio total y confirmar la compra después de un breve período de espera, 
        // todos estos datos los tengo que ver en una alerta.
        
        const productos = [
            { id: 1, nombre: 'Laptop', precio: 1200, stock: 10 },
            { id: 2, nombre: 'Teléfono móvil', precio: 800, stock: 0 },
            { id: 3, nombre: 'Tablet', precio: 500, stock: 15 },
            { id: 4, nombre: 'Smartwatch', precio: 300, stock: 30 },
            { id: 5, nombre: 'Auriculares inalámbricos', precio: 150, stock: 0 }
        ];
        
        function procesoDeCompra(producto) {
            // Método promesa en caso de éxito o error de la función.
            const promesa = new Promise((resolve, reject) => {
                // Lapso de tiempo para correr la promesa.
                setTimeout(() => {
                    // Revisar si el producto se encuetra disponible.
                    if (producto.stock > 0) {
                        const precioTotal = producto.precio
                        resolve(`Producto comprado: ${producto.nombre}. \nPrecio total: $${precioTotal}. \nStock: ${producto.stock}.`);
                    } else {
                        reject(`Producto agotado: ${producto.nombre}.`);
                    }
                }, 2000);
            });

            promesa
                .then((resultado) => {
                    alert(resultado);
                })
                .catch((error) => {
                    alert(error);
                });
        }

    </script>

</body>

</html>
